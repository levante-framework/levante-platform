var jsPsychSurveyMultiSelect=function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),n)}var i,a}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw s}}}}var s={name:"survey-multi-select",parameters:{questions:{type:e.ParameterType.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:e.ParameterType.HTML_STRING,pretty_name:"Prompt",default:void 0},options:{type:e.ParameterType.STRING,pretty_name:"Options",array:!0,default:void 0},horizontal:{type:e.ParameterType.BOOL,pretty_name:"Horizontal",default:!1},required:{type:e.ParameterType.BOOL,pretty_name:"Required",default:!1},name:{type:e.ParameterType.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:e.ParameterType.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:e.ParameterType.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:e.ParameterType.STRING,pretty_name:"Button label",default:"Continue"},required_message:{type:e.ParameterType.STRING,pretty_name:"Required message",default:"You must choose at least one response for this question"},autocomplete:{type:e.ParameterType.BOOL,pretty_name:"Allow autocomplete",default:!1}}},o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t}var n,i,s;return n=e,i=[{key:"trial",value:function(e,t){var r=this,n="jspsych-survey-multi-select",i="#"+n,a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("-")};e.innerHTML="<style id=\"jspsych-survey-multi-select-css\">.jspsych-survey-multi-select-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }.jspsych-survey-multi-select-text span.required {color: darkred;}.jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-text {  text-align: center;}.jspsych-survey-multi-select-option { line-height: 2; }.jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}label.jspsych-survey-multi-select-text input[type='checkbox'] {margin-right: 1em;}</style>";var s=a(n,"form");e.innerHTML+='<form id="'+s+'"></form>';var o=e.querySelector("#"+s);t.autocomplete||o.setAttribute("autocomplete","off");var l=a(n,"preamble");null!==t.preamble&&(o.innerHTML+='<div id="'+l+'" class="'+l+'">'+t.preamble+"</div>");for(var u=[],c=0;c<t.questions.length;c++)u.push(c);for(t.randomize_question_order&&(u=this.jsPsych.randomization.shuffle(u)),c=0;c<t.questions.length;c++){var y=t.questions[u[c]],m=u[c],p=[a(n,"question")];y.horizontal&&p.push(a(n,"horizontal")),o.innerHTML+='<div id="'+a(n,m)+'" data-name="'+y.name+'" class="'+p.join(" ")+'"></div>';var h=a(i,m);e.querySelector(h).innerHTML+='<p id="survey-question" class="'+n+'-text survey-multi-select">'+y.prompt+"</p>";for(var d=0;d<y.options.length;d++){var f=a(n,"option",m,d);e.querySelector(h).innerHTML+='<div id="'+f+'" class="'+a(n,"option")+'"></div>';var v=document.getElementById(f),b=a(n,"response",m),g=a(n,"response",m,d),j=document.createElement("label");j.setAttribute("class",n+"-text"),j.innerHTML=y.options[d],j.setAttribute("for",g);var q=document.createElement("input");q.setAttribute("type","checkbox"),q.setAttribute("name",b),q.setAttribute("id",g),q.setAttribute("value",y.options[d]),v.appendChild(j),j.insertBefore(q,j.firstChild)}}o.innerHTML+='<div class="fail-message"></div>',o.innerHTML+='<button id="'+n+'-next" class="'+n+' jspsych-btn">'+t.button_label+"</button>",e.querySelector("#jspsych-survey-multi-select-next").addEventListener("click",(function(){for(var r=0;r<t.questions.length;r++)t.questions[r].required&&(null==e.querySelector("#jspsych-survey-multi-select-"+r+" input:checked")?e.querySelector("#jspsych-survey-multi-select-"+r+" input").setCustomValidity(t.required_message):e.querySelector("#jspsych-survey-multi-select-"+r+" input").setCustomValidity(""));o.reportValidity()})),o.addEventListener("submit",(function(n){n.preventDefault();for(var i=performance.now(),a=Math.round(i-P),s={},o=0;o<t.questions.length;o++){for(var l=e.querySelector("#jspsych-survey-multi-select-"+o),c=[],y=l.querySelectorAll("input[type=checkbox]:checked"),m=0;m<y.length;m++){var p=y[m];c.push(p.value)}var h={},d="Q"+o;""!==l.attributes["data-name"].value&&(d=l.attributes["data-name"].value),h[d]=c,Object.assign(s,h),c.length}var f={rt:a,response:s,question_order:u};e.innerHTML="",r.jsPsych.finishTrial(f)}));var P=performance.now()}},{key:"simulate",value:function(e,t,r,n){"data-only"==t&&(n(),this.simulate_data_only(e,r)),"visual"==t&&this.simulate_visual(e,r,n)}},{key:"create_simulation_data",value:function(e,t){var n,i={},s=1e3,o=a(e.questions);try{for(o.s();!(n=o.n()).done;){var l=n.value,u=void 0;u=l.required?this.jsPsych.randomization.randomInt(1,l.options.length):this.jsPsych.randomization.randomInt(0,l.options.length);var c=l.name?l.name:"Q".concat(e.questions.indexOf(l)),y=this.jsPsych.randomization.sampleWithoutReplacement(l.options,u);i[c]=y,s+=this.jsPsych.randomization.sampleExGaussian(1500,400,.005,!0)}}catch(e){o.e(e)}finally{o.f()}var m={response:i,rt:s,question_order:e.randomize_question_order?this.jsPsych.randomization.shuffle(r(Array(e.questions.length).keys())):r(Array(e.questions.length).keys())},p=this.jsPsych.pluginAPI.mergeSimulationData(m,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,p),p}},{key:"simulate_data_only",value:function(e,t){var r=this.create_simulation_data(e,t);this.jsPsych.finishTrial(r)}},{key:"simulate_visual",value:function(e,t,r){var n=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),r();for(var s=Object.entries(n.response),o=0;o<s.length;o++){var l,u=a(s[o][1]);try{for(u.s();!(l=u.n()).done;){var c=l.value;this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-multi-select-response-".concat(o,"-").concat(e.questions[o].options.indexOf(c))),(n.rt-1e3)/s.length*(o+1))}}catch(e){u.e(e)}finally{u.f()}}this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-multi-select-next"),n.rt)}}],i&&t(n.prototype,i),s&&t(n,s),Object.defineProperty(n,"prototype",{writable:!1}),e}();return o.info=s,o}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-survey-multi-select@1.1.3/dist/index.browser.min.js.map
