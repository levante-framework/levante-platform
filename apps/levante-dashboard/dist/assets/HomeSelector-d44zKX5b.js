const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeParticipant-pJmAjZyJ.js","assets/tanstack-CsBZeLmk.js","assets/index-CNfLgq8b.js","assets/lodash-DAY8-RAI.js","assets/index-kdKfEdeI.js","assets/phoneme-MNW3QAs-.js","assets/sentry-CX5z418I.js","assets/index-ClR7CeWO.css","assets/_baseEach-Ab1i50PF.js","assets/index-Ca817Vow.js","assets/toInteger-CM0MbwkG.js","assets/toNumber-iH9M7_fM.js","assets/index-D6IoMtKH.js","assets/useUserDataQuery-kceEoCbw.js","assets/assignments-orZosl8K.js","assets/useDistrictsQuery-CeEXa47D.js","assets/tasks-DtSsBL6W.js","assets/useTasksQuery-DLa8TwAo.js","assets/ConsentModal.vue_vue_type_style_index_0_lang-CyeyA89h.js","assets/index-BfBVVvAI.js","assets/index-CvlP-Xmk.js","assets/marked.esm-C9B6iGib.js","assets/lowerCase-Cjz_C50J.js","assets/_createCompounder-BtP0Easx.js","assets/toasts-BqURhU4z.js","assets/ConsentModal-CxQq_RfU.css","assets/utils-DSob1QZ1.js","assets/index-BktsoGN8.js","assets/index-BOUM9DJf.js","assets/index-DBlP99Qc.js","assets/capitalize-DtoFwN2t.js","assets/upperFirst-CKgMld1W.js","assets/bucket-D8HfKr8u.js","assets/index-CsSDOoHL.js","assets/index-BrLDugnL.js","assets/survey-CRadXOqO.js","assets/surveyInitialization-566f37hA.js","assets/HomeParticipant-DESZeji6.css","assets/HomeAdministrator-Cpnkq2hP.js","assets/index-tWo9sWbs.js","assets/index-D4pzgRTJ.js","assets/index-SnZVGOaT.js","assets/index-DXN1oPWm.js","assets/index-d6wokVQG.js","assets/index-CmbHKKL9.js","assets/useAdministrationsListQuery-C2mhJMoz.js","assets/administrations-BtjuibWP.js","assets/chunk-C6jcZpD8.js","assets/orgs-C8TAQ0-m.js","assets/index-BbFXSlD1.js","assets/reports-DZCyTjfn.js","assets/useTasksDictionaryQuery-DDq5c2TB.js","assets/HomeAdministrator-ByESWCW2.css","assets/ConsentModal-D38qqexa.js"])))=>i.map(i=>d[i]);
import{d as U,C as z,U as F,s as D,e as G,a as $,f as J,g as W,h as X,i as Z,L as ee,_ as m,j as te}from"./index-kdKfEdeI.js";import{u as se}from"./useUserDataQuery-kceEoCbw.js";import{a8 as ne,a9 as ae,a6 as y,r as c,c as p,w as oe,o as re,R as S,O as a,M as v,N,S as ie,k as ue,z as l,ad as T,F as ce}from"./tanstack-CsBZeLmk.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="51c6e5af-3027-4385-a169-c546b70a0752",e._sentryDebugIdIdentifier="sentry-dbid-51c6e5af-3027-4385-a169-c546b70a0752")}catch{}})();const le=()=>{const e=U(),t=ne();return ae({mutationKey:z,mutationFn:async s=>{const d=y(s.consentType),o=y(s.consentVersion),_=y(s.consentParams)||{};await e.roarfirekit.updateConsentStatus(d,o,_)},onSuccess:()=>{t.invalidateQueries({queryKey:[F]})}})},E={TOS:"tos",ASSENT:"assent",ASSENT_ES:"assent-es"},de={key:0},_e={class:"text-center col-full"},fe={key:1},me={__name:"HomeSelector",setup(e){const t=T(()=>m(()=>import("./HomeParticipant-pJmAjZyJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]))),s=T(()=>m(()=>import("./HomeAdministrator-Cpnkq2hP.js"),__vite__mapDeps([38,1,4,5,6,3,7,39,40,41,42,29,43,44,45,46,47,10,11,48,34,49,50,26,51,17,16,24,52]))),d=T(()=>m(()=>import("./ConsentModal-D38qqexa.js"),__vite__mapDeps([53,18,4,1,5,6,3,7,19,20,21,22,23,24,25]))),o=U(),{roarfirekit:_,ssoProvider:w}=D(o),g=G(),I=$(),{mutateAsync:L}=le();w.value&&(console.log("Detected SSO authentication, redirecting..."),g.replace({path:J.SSO}));const R=W(),{requireRefresh:b}=D(R),r=c(!1);let f;const A=()=>{f&&f(),r.value=!0};f=o.$subscribe(async(n,u)=>{var P;(P=u.roarfirekit)!=null&&P.restConfig&&A()});const{isLoading:V,data:C}=se(null,{enabled:r}),{isLoading:M,data:h}=X({enabled:r}),{isAdmin:x,isSuperAdmin:H,isParticipant:Q}=Z(h),i=p(()=>x.value||H.value),k=p(()=>!r.value||V.value||M.value||!C.value||!h.value),B=c(!1),O=p(()=>i.value?E.TOS:I.locale.value.includes("es")?E.ASSENT_ES:E.ASSENT),K=c(""),Y=c("");async function j(){await L({consentType:O,consentVersion:Y})}async function q(){}return oe([C,i],async([n,u])=>{!te(n)&&u&&await q()},{immediate:!0}),re(async()=>{var n;b.value&&(b.value=!1,g.go(0)),(n=_.value)!=null&&n.restConfig&&A()}),(n,u)=>(a(),S(ce,null,[k.value?(a(),S("div",de,[ie("div",_e,[ue(ee,{fullscreen:""})])])):(a(),S("div",fe,[l(Q)?(a(),v(l(t),{key:0})):i.value?(a(),v(l(s),{key:1})):N("",!0)])),!k.value&&B.value&&i.value?(a(),v(l(d),{key:2,"consent-text":K.value,"consent-type":O.value,"on-confirm":j},null,8,["consent-text","consent-type"])):N("",!0)],64))}},ve=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{ve as H,le as u};
//# sourceMappingURL=HomeSelector-d44zKX5b.js.map
