var jsPsychHtmlButtonResponse=function(t){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(a=r.key,s=void 0,"symbol"==typeof(s=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?s:String(s)),r)}var a,s}var n={name:"html-button-response",parameters:{stimulus:{type:t.ParameterType.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:t.ParameterType.STRING,pretty_name:"Choices",default:void 0,array:!0},button_html:{type:t.ParameterType.HTML_STRING,pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0},prompt:{type:t.ParameterType.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:t.ParameterType.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:t.ParameterType.INT,pretty_name:"Trial duration",default:null},margin_vertical:{type:t.ParameterType.STRING,pretty_name:"Margin vertical",default:"0px"},margin_horizontal:{type:t.ParameterType.STRING,pretty_name:"Margin horizontal",default:"8px"},response_ends_trial:{type:t.ParameterType.BOOL,pretty_name:"Response ends trial",default:!0},enable_button_after:{type:t.ParameterType.INT,pretty_name:"Enable button after",default:0}}},r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsPsych=e}var n,r,a;return n=t,(r=[{key:"trial",value:function(t,e){var n=this,r='<div id="jspsych-html-button-response-stimulus">'+e.stimulus+"</div>",a=[];if(Array.isArray(e.button_html))e.button_html.length==e.choices.length?a=e.button_html:console.error("Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var s=0;s<e.choices.length;s++)a.push(e.button_html);for(r+='<div id="jspsych-html-button-response-btngroup">',s=0;s<e.choices.length;s++){var i=a[s].replace(/%choice%/g,e.choices[s]);r+='<div class="jspsych-html-button-response-button" style="display: inline-block; margin:'+e.margin_vertical+" "+e.margin_horizontal+'" id="jspsych-html-button-response-button-'+s+'" data-choice="'+s+'">'+i+"</div>"}r+="</div>",null!==e.prompt&&(r+=e.prompt),t.innerHTML=r;var o=performance.now();for(s=0;s<e.choices.length;s++)t.querySelector("#jspsych-html-button-response-button-"+s).addEventListener("click",(function(t){c(t.currentTarget.getAttribute("data-choice"))}));var l={rt:null,button:null},u=function(){n.jsPsych.pluginAPI.clearAllTimeouts();var r={rt:l.rt,stimulus:e.stimulus,response:l.button};t.innerHTML="",n.jsPsych.finishTrial(r)};function c(n){var r=performance.now(),a=Math.round(r-o);l.button=parseInt(n),l.rt=a,t.querySelector("#jspsych-html-button-response-stimulus").className+=" responded";for(var s=document.querySelectorAll(".jspsych-html-button-response-button button"),i=0;i<s.length;i++)s[i].setAttribute("disabled","disabled");e.response_ends_trial&&u()}if(null!==e.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((function(){t.querySelector("#jspsych-html-button-response-stimulus").style.visibility="hidden"}),e.stimulus_duration),e.enable_button_after>0){var h=document.querySelectorAll(".jspsych-html-button-response-button button");for(s=0;s<h.length;s++)h[s].setAttribute("disabled","disabled");this.jsPsych.pluginAPI.setTimeout((function(){for(var t=document.querySelectorAll(".jspsych-html-button-response-button button"),e=0;e<t.length;e++)t[e].removeAttribute("disabled")}),e.enable_button_after)}null!==e.trial_duration&&this.jsPsych.pluginAPI.setTimeout(u,e.trial_duration)}},{key:"simulate",value:function(t,e,n,r){"data-only"==e&&(r(),this.simulate_data_only(t,n)),"visual"==e&&this.simulate_visual(t,n,r)}},{key:"create_simulation_data",value:function(t,e){var n={stimulus:t.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0)+t.enable_button_after,response:this.jsPsych.randomization.randomInt(0,t.choices.length-1)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,r),r}},{key:"simulate_data_only",value:function(t,e){var n=this.create_simulation_data(t,e);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(t,e,n){var r=this.create_simulation_data(t,e),a=this.jsPsych.getDisplayElement();this.trial(a,t),n(),null!==r.rt&&this.jsPsych.pluginAPI.clickTarget(a.querySelector('div[data-choice="'.concat(r.response,'"] button')),r.rt)}}])&&e(n.prototype,r),a&&e(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();return r.info=n,r}(jsPsychModule);
//# sourceMappingURL=https://unpkg.com/@jspsych/plugin-html-button-response@1.2.0/dist/index.browser.min.js.map
