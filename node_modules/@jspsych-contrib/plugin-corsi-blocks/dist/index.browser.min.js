var jsPsychCorsiBlocks=function(e){"use strict";function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o={name:"corsi-blocks",parameters:{sequence:{type:e.ParameterType.INT,default:void 0,array:!0},blocks:{type:e.ParameterType.COMPLEX,array:!0,default:[{y:80,x:45},{y:94,x:80},{y:70,x:20},{y:60,x:70},{y:50,x:35},{y:40,x:6},{y:45,x:94},{y:25,x:60},{y:6,x:47}],nested:{x:{type:e.ParameterType.INT,default:void 0},y:{type:e.ParameterType.INT,default:void 0}}},block_size:{type:e.ParameterType.INT,default:12},display_width:{type:e.ParameterType.STRING,default:"400px"},display_height:{type:e.ParameterType.STRING,default:"400px"},prompt:{type:e.ParameterType.STRING,default:null},mode:{type:e.ParameterType.STRING,default:"display",options:["display","input"]},sequence_gap_duration:{type:e.ParameterType.INT,default:250},sequence_block_duration:{type:e.ParameterType.INT,default:1e3},pre_stim_duration:{type:e.ParameterType.INT,default:500},response_animation_duration:{type:e.ParameterType.INT,default:500},block_color:{type:e.ParameterType.STRING,default:"#555"},highlight_color:{type:e.ParameterType.STRING,default:"#ff0000"},correct_color:{type:e.ParameterType.STRING,default:"#00ff00"},incorrect_color:{type:e.ParameterType.STRING,default:"#ff0000"}}},r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t}var o,r,n;return o=e,(r=[{key:"trial",value:function(e,t){var o=this,r='<style id="jspsych-corsi-css">\n      #jspsych-corsi-stimulus { \n        position: relative; \n        width:'.concat(t.display_width,"; \n        height:").concat(t.display_height,";\n      }\n      .jspsych-corsi-block { \n        background-color: ").concat(t.block_color,"; \n        position: absolute; \n        width: ").concat(t.block_size,"%; \n        height: ").concat(t.block_size,"%;\n        transform: translate(-50%, -50%);\n      }\n      #jspsych-corsi-prompt { \n        position: absolute; \n        text-align: center; \n        width: ").concat(t.display_width,"; \n        top: 100%; \n      }\n      #jspsych-corsi-prompt p { \n        font-size: 18px; \n      }\n      ").concat("input"==t.mode?".jspsych-corsi-block { cursor: pointer; }":"","\n    </style>");r+='<div id="jspsych-corsi-stimulus">';for(var n=0;n<t.blocks.length;n++)r+='<div class="jspsych-corsi-block" data-id="'.concat(n,'" style="top:').concat(t.blocks[n].y,"%; left:").concat(t.blocks[n].x,'%;"></div>');null!=t.prompt&&(r+='<div id="jspsych-corsi-prompt"><p>'.concat(t.prompt,"</p></div>")),r+="</div>",e.innerHTML=r;var c,a,i=performance.now(),s={sequence:t.sequence,response:[],rt:[],blocks:t.blocks,correct:null},l=function(){e.innerHTML="",o.jsPsych.finishTrial(s)},p=function(e,t){var o=performance.now(),r=function e(t,r,n){performance.now()-n>=r?t():window.requestAnimationFrame((function(){return e(t,r,o)}))};window.requestAnimationFrame((function(){return r(e,t,o)}))};if("display"==t.mode){var u=0,y="pre-stim";window.requestAnimationFrame((function o(){if("pre-stim"==y)p(o,t.pre_stim_duration),y="sequence";else if("sequence"==y){var r=e.querySelector('.jspsych-corsi-block[data-id="'.concat(t.sequence[u],'"]'));u<t.sequence.length&&(r.style.backgroundColor=t.highlight_color,p(o,t.sequence_block_duration),y="iti"),u==t.sequence.length&&l()}else"iti"==y&&(e.querySelector('.jspsych-corsi-block[data-id="'.concat(t.sequence[u],'"]')).style.backgroundColor=t.block_color,u++,p(o,t.sequence_gap_duration),y="sequence")}))}"input"==t.mode&&function(){var o=[{backgroundColor:t.block_color},{backgroundColor:t.correct_color,offset:.2},{backgroundColor:t.block_color}],r=[{backgroundColor:t.block_color},{backgroundColor:t.incorrect_color,offset:.2},{backgroundColor:t.block_color}],n={duration:t.response_animation_duration,iterations:1},p=function(c){if(null===s.correct){var a=Math.round(performance.now()-i);s.response.push(parseInt(c)),s.rt.push(a),parseInt(c)==t.sequence[s.response.length-1]?(e.querySelector('.jspsych-corsi-block[data-id="'.concat(c,'"]')).animate(o,n),s.response.length==t.sequence.length&&(s.correct=!0,setTimeout(l,t.response_animation_duration))):(e.querySelector('.jspsych-corsi-block[data-id="'.concat(c,'"]')).animate(r,n),s.correct=!1,setTimeout(l,t.response_animation_duration))}};for(c=e.querySelectorAll(".jspsych-corsi-block"),a=0;a<c.length;a++)c[a].addEventListener("click",(function(e){p(e.target.getAttribute("data-id"))}))}()}}])&&t(o.prototype,r),n&&t(o,n),Object.defineProperty(o,"prototype",{writable:!1}),e}();return r.info=o,r}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
