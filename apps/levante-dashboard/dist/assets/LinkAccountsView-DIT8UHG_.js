import{_ as C}from"./provider-google-logo-HyXl6t-r.js";import{m as L,d as P,s as T,z as I,u as S}from"./index-kdKfEdeI.js";import{s as g}from"./index-D4pzgRTJ.js";import{s as $}from"./index-BfBVVvAI.js";import{c as v,r as E,o as V,R as u,O as l,S as o,k as j,M as b,z as p,a1 as h,F as B}from"./tanstack-CsBZeLmk.js";import"./phoneme-MNW3QAs-.js";import"./sentry-CX5z418I.js";import"./lodash-DAY8-RAI.js";import"./index-CvlP-Xmk.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new n.Error().stack;a&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[a]="6d0c2aa7-e1d9-4615-b307-104de5e67d1a",n._sentryDebugIdIdentifier="sentry-dbid-6d0c2aa7-e1d9-4615-b307-104de5e67d1a")}catch{}})();const O={class:"table-container"},R={class:"flex flex-row justify-content-between w-full",style:{"background-color":"var(--surface-d)"}},z={class:"flex flex-row w-full h-3rem p-2 gap-2"},M={class:"chip-container"},N={class:"flex justify-content-end"},F=["disabled"],G={__name:"LinkAccountsView",setup(n){const a=P(),{roarfirekit:s}=T(a),i=I(),d=v(()=>{var e,r,y;return((y=(r=(e=s.value)==null?void 0:e.admin)==null?void 0:r.user)==null?void 0:y.providerData).map(A=>A.providerId)}),k=E(!1);let c;const f=()=>{c&&c(),k.value=!0};c=a.$subscribe(async(t,e)=>{e.roarfirekit.restConfig&&f()}),V(()=>{s.value.restConfig&&f()});const w=async t=>{console.log(`Linking account with ${t}`),await s.value.linkAuthProviderWithPopup(t).then(()=>s.value.forceIdTokenRefresh()).catch(e=>{const r=e.code;return r==="auth/provider-already-linked"?i.add({severity:"error",summary:"Account already linked",detail:"This account is already associated with that provider.",life:3e3}):r==="auth/auth/credential-already-in-use"?i.add({severity:"error",summary:"Email already in use",detail:"The login you provided is already associated with an existing account.",life:3e3}):r===18?console.log("Cross-origin popup error ignored."):i.add({severity:"error",summary:"Error occurred",detail:"An unexpected error occurred while linking this account.",life:3e3}),s.value.forceIdTokenRefresh()})},m=async t=>{console.log(`Unlinking account with ${t}`),s.value.unlinkAuthProvider(t)},x=S(),_=v(()=>d.value.includes("password")&&d.value.length>1),D=async()=>{x.require({message:"Once deleted, you will need to use an SSO option to access your account!",header:"Delete Password",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Delete",accept:async()=>{await m("password").then(()=>{i.add({severity:"success",summary:"Password Deleted",detail:"Password authentication has been removed from your account.",life:3e3})}).catch(()=>{i.add({severity:"error",summary:"Error occurred",detail:"An unexpected error occurred while deleting your password.",life:3e3})})}})};return(t,e)=>(l(),u(B,null,[e[6]||(e[6]=o("h2",null,"Link Accounts",-1)),e[7]||(e[7]=o("span",null,"Make logging in easy by linking your accounts.",-1)),o("div",O,[o("div",R,[o("div",z,[e[2]||(e[2]=o("img",{src:C,alt:"The Google Logo",class:"mr-2"},null,-1)),e[3]||(e[3]=o("span",{style:{"line-height":"30px"},class:"text-lg"},"Google",-1)),o("div",M,[d.value.includes("google.com")?(l(),b(p(g),{key:0,icon:"pi pi-check",label:"Linked",class:"linked-chip"})):(l(),b(p(g),{key:1,label:"Linked",icon:"pi pi-times",class:"unlinked-chip"}))])]),d.value.includes("google.com")?(l(),u("button",{key:0,class:"border-none border-round bg-primary text-white p-2 my-2 hover:surface-400 mr-2",onClick:e[0]||(e[0]=r=>m("google"))}," Unlink ")):(l(),u("button",{key:1,class:"border-none border-round bg-primary text-white p-2 my-2 hover:surface-400 mr-2",onClick:e[1]||(e[1]=r=>w("google"))}," Link "))])]),o("div",null,[e[4]||(e[4]=o("h2",{style:{"margin-top":"3.5rem"}},"Delete Password",-1)),e[5]||(e[5]=o("span",null,[h("You have the option to remove your password if you want to exclusively use an SSO option listed above. You must have "),o("span",{class:"font-bold"}," at least one"),h(" other login method linked to delete your password.")],-1)),o("div",N,[o("button",{disabled:!_.value,class:"border-none border-round bg-primary text-white p-2 my-2 hover:surface-400",onClick:D}," Delete Password ",8,F)])]),j(p($))],64))}},Z=L(G,[["__scopeId","data-v-bad96df5"]]);export{Z as default};
//# sourceMappingURL=LinkAccountsView-DIT8UHG_.js.map
