import{m as k,e as h,d as y,s as w,l as c,L as I,k as _,q as u}from"./index-kdKfEdeI.js";import{r as v,o as x,M as E,R as L,O as d,S as l,k as S,z as f}from"./tanstack-CsBZeLmk.js";import"./phoneme-MNW3QAs-.js";import"./sentry-CX5z418I.js";import"./lodash-DAY8-RAI.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new t.Error().stack;i&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[i]="8fb693ad-c368-46c9-b3de-393fd182bdfb",t._sentryDebugIdIdentifier="sentry-dbid-8fb693ad-c368-46c9-b3de-393fd182bdfb")}catch{}})();const D={key:1,style:{"margin-top":"200px"}},B={class:"center"},C={__name:"AuthEmailLink",setup(t){const i=h(),n=y(),{roarfirekit:m,uid:o}=w(n),r=v(!1),g=async a=>{p();const e=window.location.href;await n.signInWithEmailLink({email:a,emailLink:e}).then(async()=>{if(o){const s=await u("users",o.value),b=await u("userClaims",o.value);n.setUserData(s),n.setUserClaims(b),i.push({name:"Home"})}}).catch(s=>{r.value=!0,console.error("error logging in:",s)})},p=n.$subscribe(async(a,e)=>{e.roarfirekit.isSignInWithEmailLink&&e.roarfirekit.signInWithEmailLink&&(m.value.isSignInWithEmailLink(window.location.href)||i.replace({name:"Home"}))});return x(async()=>{const a=window.localStorage.getItem("emailForSignIn");if(a)try{await g(a)}catch(e){console.error("error logging in:",e),c.capture("Error logging in with email link",{error:e}),r.value=!0}else r.value=!0,c.capture("No email in localStorage")}),(a,e)=>r.value?(d(),L("div",D,[e[1]||(e[1]=l("i",{class:"pi pi-exclamation-circle text-6xl text-red-500 center"},null,-1)),e[2]||(e[2]=l("p",{class:"text-xl font-semibold text-center"},"There was a problem with the email sign-in link. Please try again.",-1)),l("div",B,[S(f(_),{label:"Back to sign in",onClick:e[0]||(e[0]=s=>f(i).push({name:"SignIn"}))})])])):(d(),E(I,{key:0,fullscreen:""}))}},F=k(C,[["__scopeId","data-v-ce44aace"]]);export{F as default};
//# sourceMappingURL=AuthEmailLink-Dz42O4jl.js.map
